function updateHTML(){const t=document.querySelectorAll("[data-restsheet-url]");for(let e,n=0;e=t[n];n++){const t=e.dataset.restsheetSearch,n=e.dataset.restsheetLimit,s=e.dataset.restsheetOffset;let r=e.dataset.restsheetUrl;if(r=r.endsWith("/")?r:r+"/","FORM"===e.tagName)return configureForm(e,r);e.style.display="none",fetchData({URL:r,search:t,limit:n,offset:s}).then(t=>{const n=[];for(let s=0;s<t.length;s++)n.push(e.innerHTML);const s=n.map((e,n)=>interpolateString(e,t[n]));e.innerHTML=s.join(""),e.style.display=""}).catch(t=>{throw t})}}function fetchData({URL:t,search:e,limit:n,offset:s}){const r=`${t}${e?"search/":""}?${[n?`limit=${n}`:"",s?`offset=${s}`:"",e?`search=${e}`:""].join("&")}`;return new Promise((t,e)=>{fetch(r).then(t=>t.json()).then(e=>t(e)).catch(t=>e(t))})}function interpolateString(t,e){return t.replace(/{{([^{}]*)}}/g,(t,n)=>{const s=e[n];return"string"==typeof s||"number"==typeof s?s:t})}function configureForm(t,e){e=`${e}append`,t.addEventListener("submit",n=>{n.preventDefault();let s=new FormData(t);s=Array.from(s.entries()).reduce((t,e)=>({...t,[e[0]]:e[1]}),{});const r={method:"POST",mode:"cors",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify([s])};fetch(e,r).then(t=>new Promise(e=>t.json().then(n=>e({status:t.status,body:n})))).then(t=>{const e=new CustomEvent("ResponseReceived",{detail:t});n.target.dispatchEvent(e)}).catch(t=>{throw t})})}document.addEventListener("DOMContentLoaded",updateHTML);