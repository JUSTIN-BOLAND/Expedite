function updateHTML(){const t=document.querySelectorAll("[data-stein-url]");for(let e,n=0;e=t[n];n++){const t=e.dataset.steinSearch,n=e.dataset.steinLimit,r=e.dataset.steinOffset;let o=e.dataset.steinUrl;if(o=o.endsWith("/")?o:o+"/","FORM"===e.tagName)return configureForm(e,o);e.style.display="none",fetchData({URL:o,search:t,limit:n,offset:r}).then(t=>{const n=[];for(let r=0;r<t.length;r++)n.push(e.innerHTML);const r=n.map((e,n)=>interpolateString(e,t[n]));e.innerHTML=r.join(""),e.style.display=""}).catch(t=>{throw new Error(t)})}}function fetchData({URL:t,search:e,limit:n,offset:r}){const o=`${t}?${[n?`limit=${n}`:"",r?`offset=${r}`:"",e?`search=${e}`:""].join("&")}`;return new Promise((t,e)=>{fetch(o).then(t=>t.json()).then(e=>t(e)).catch(t=>e(t))})}function interpolateString(t,e){return t.replace(/{{([^{}]*)}}/g,(t,n)=>{const r=e[n];return"string"==typeof r?r:t})}function configureForm(t,e){t.addEventListener("submit",n=>{n.preventDefault();let r=new FormData(t);r=Array.from(r.entries()).reduce((t,e)=>({...t,[e[0]]:e[1]}),{});const o={method:"POST",mode:"cors",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify([r])};fetch(e,o).then(t=>new Promise(e=>t.json().then(n=>e({status:t.status,body:n})))).then(t=>{const e=new CustomEvent("ResponseReceived",{detail:t});n.target.dispatchEvent(e)}).catch(t=>{throw new Error(t)})})}document.addEventListener("DOMContentLoaded",updateHTML);